#!/bin/sh

# Creates or attaches session based on given name, or the directory name if
# not given.

dir=${1:-$PWD}
name=$(basename "$dir" | tr '.' '-' | sed 's/^-//')

create_session() {
  tmux new -c "$dir" -s "$name" "$@"
}

if [ -z "$TMUX" ]; then
  create_session -A
else
  ! tmux has-session -t "$name" 2>/dev/null && create_session -d
  tmux switch-client -t "$name"
fi
