# tmux.conf

# misc # {{{

# term colors
set -g default-terminal "screen-256color"

# history
set -g history-limit 10000

# utf8
set -g utf8 on
set -g status-utf8 on


# }}}

# keys # {{{

# remap prefix
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# escape time
set -g escape-time 50

# force reload
unbind r
bind r source-file ~/.tmux.conf

# cycling
unbind ^A
bind ^A select-pane -t :.+

# choose-session
bind-key S choose-session

# split windows like vim
# vim's definition of a horizontal/vertical split is reversed from tmux's
bind s split-window -v
bind v split-window -h

# move around panes with hjkl, as one would in vim after pressing ctrl-w
unbind h
bind h select-pane -L
unbind j
bind j select-pane -D
unbind k
bind k select-pane -U
unbind l
bind l select-pane -R

# resize panes like vim
unbind <
bind < resize-pane -L 5
unbind >
bind > resize-pane -R 5
unbind -
bind - resize-pane -D 5
unbind +
bind + resize-pane -U 5

# bind : to command-prompt like vim
# this is the default in tmux already
bind : command-prompt

# vi-style controls for copy mode
setw -g mode-keys vi

# status keys
set -g status-keys vi

# toggle status bar
bind b set-option status

# Smart pane switching with awareness of vim splits
# https://github.com/christoomey/vim-tmux-navigator
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys 'C-\\') || tmux select-pane -l"

# music toggling ish
# because of stupid problems I actually have to use the FN keys the `symbols` are on, you know
# ugh
bind F7 run "mpc toggle --quiet"
bind F6 run "mpc prev --quiet"
bind F8 run "mpc next --quiet"

# }}}

# colors # {{{

# statusline
set -g status-bg default
set -g status-fg default
set -g status-attr bright

# default window title colors
setw -g window-status-fg blue
setw -g window-status-bg default
setw -g window-status-attr dim

# active window title colors
setw -g window-status-current-fg blue
setw -g window-status-current-bg default
setw -g window-status-current-attr bright

# bell alerted window color
setw -g window-status-bell-bg red
setw -g window-status-bell-fg white
setw -g window-status-bell-attr bright

# content alerted color
setw -g window-status-content-bg blue
setw -g window-status-content-fg white
setw -g window-status-content-attr bright
setw -g window-status-activity-bg blue
setw -g window-status-activity-fg white
setw -g window-status-activity-attr bright

# pane borders
set -g pane-border-fg brightblack
set -g pane-border-bg default
set -g pane-active-border-fg white
set -g pane-active-border-bg default

# command line
set -g message-fg default
set -g message-bg default
set -g message-attr bright

# }}}

# appearance # {{{

# keyboard friendlier
set -g base-index 1
set -g renumber-windows 1
set-window-option -g pane-base-index 1

# title
set -g set-titles on
set -g set-titles-string "#S/#W - tmux"

# agressive resize
setw -g aggressive-resize on

# layouts
setw -g main-pane-width 160
setw -g other-pane-height 20

# statusbar
set -g status-interval 1

set -g status-justify left
set -g status-left ''
set -g status-right '#[fg=red]bat: #(~/.tmux/scripts/bat)%%#[fg=default] • #[fg=yellow,bright]Song: #(~/.tmux/scripts/music)#[fg=default] • #[fg=cyan]#(date +"%a %H:%M")#[fg=default] '
set -g status-right-length 100
setw -g window-status-format ' #[fg=yellow] #I  #[fg=default]#{pane_current_command}'
setw -g window-status-current-format ' #[bg=magenta] #[fg=yellow]#I #[bg=default] #[fg=default]#{pane_current_command}'

# }}}

# vim: fdm=marker:
